define(["./_baseHas","./keys"],function(r,n){function t(t,f,c,i,a,u){var s=a&o,v=n(t),g=v.length,l=n(f),y=l.length;if(g!=y&&!s)return!1;for(var b=g;b--;){var d=v[b];if(!(s?d in f:r(f,d)))return!1}var h=u.get(t);if(h)return h==f;var k=!0;u.set(t,f);for(var p=s;++b<g;){d=v[b];var H=t[d],_=f[d];if(i)var j=s?i(_,H,d,f,t,u):i(H,_,d,t,f,u);if(!(j===e?H===_||c(H,_,i,a,u):j)){k=!1;break}p||(p="constructor"==d)}if(k&&!p){var m=t.constructor,q=f.constructor;m!=q&&"constructor"in t&&"constructor"in f&&!("function"==typeof m&&m instanceof m&&"function"==typeof q&&q instanceof q)&&(k=!1)}return u["delete"](t),k}var e,o=2;return t});